# [25-W SQL 스터디] 3주차 공부

## 1. [가격대 별 상품 개수 구하기](https://school.programmers.co.kr/learn/courses/30/lessons/131530)
공부한 날짜: 2025년 1월 29일

### 작성한 SQL 쿼리
```SQL
SELECT (
    CASE WHEN PRICE < 10000 THEN 0
    ELSE TRUNCATE(PRICE, -4)
    END) AS PRICE_GROUP, COUNT(*) AS PRODUCTS
FROM PRODUCT
GROUP BY PRICE_GROUP
ORDER BY PRICE_GROUP;
```

### 함수 공부
```SQL
1. TRUNCATE 함수
TRUNCATE(number, decimals)

number: 버림할 숫자
decimals: 숫자의 소수점 이하 자릿수
-> decimals이 양수면 소수점 버림, 음수면 정수 버림하면 된다.

ex) PRICE = 12345의 경우, TRUNCATE(PRICE, -4)는 10000
ex) PRICE = 123456.789의 경우, TRUNCATE(PRICE, -4)는 120000
ex) PRICE = 123456.789의 경우, TRUNCATE(PRICE, -3)은 123000
ex) PRICE = 123456.789의 경우, TRUNCATE(PRICE, 3)은 123456.789 (소수점 기준으로 세 번째 자리까지 유지하고 이후를 버림)
ex) PRICE = 123456.789의 경우, TRUNCATE(PRICE, 2)는 123456.78
```


## 2. [연도 별 평균 미세먼지 농도 조회하기](https://school.programmers.co.kr/learn/courses/30/lessons/284530)
공부한 날짜: 2025년 1월 29일

### 작성한 SQL 쿼리
```SQL
SELECT
    YEAR(YM) AS YEAR,
    ROUND(AVG(PM_VAL1), 2) AS PM10,
    ROUND(AVG(PM_VAL2), 2) AS "PM2.5"
FROM AIR_POLLUTION
WHERE LOCATION2 = '수원'
GROUP BY YEAR
ORDER BY YEAR;
```


## 3. [물고기 종류 별 잡은 수 구하기](https://school.programmers.co.kr/learn/courses/30/lessons/293257)
공부한 날짜: 2025년 1월 29일

### 작성한 SQL 쿼리
```SQL
SELECT COUNT(*) AS FISH_COUNT, FISH_NAME
FROM FISH_NAME_INFO A
JOIN FISH_INFO B ON A.FISH_TYPE = B.FISH_TYPE
GROUP BY FISH_NAME
ORDER BY FISH_COUNT DESC;
```

### 함수 공부
```SQL
SQL에서는 GROUP BY에 포함되지 않은 컬럼을 SELECT 절에서 사용하면 오류가 발생함.

가령, 문제에서 물고기의 종류 별 물고기의 이름과 잡은 수를 출력하라고 해서
GROUP BY FISH_TYPE를 사용하면 에러가 발생함.
```


## 4. [ROOT 아이템 구하기](https://school.programmers.co.kr/learn/courses/30/lessons/273710)
공부한 날짜: 2025년 1월 29일

### 작성한 SQL 쿼리
```SQL
SELECT I.ITEM_ID, ITEM_NAME
FROM ITEM_INFO I
JOIN ITEM_TREE T ON I.ITEM_ID = T.ITEM_ID
WHERE PARENT_ITEM_ID IS NULL;
```


## 5. [월별 잡은 물고기 수 구하기](https://school.programmers.co.kr/learn/courses/30/lessons/293260)
공부한 날짜: 2025년 1월 29일

### 작성한 SQL 쿼리
```SQL
SELECT COUNT(*) AS FISH_COUNT, MONTH(TIME) AS MONTH
FROM FISH_INFO
GROUP BY MONTH
ORDER BY MONTH;
```


## 6. [조건에 맞는 사원 정보 조회하기](https://school.programmers.co.kr/learn/courses/30/lessons/284527)
공부한 날짜: 2025년 1월 29일

### 작성한 SQL 쿼리
```SQL
SELECT SUM(SCORE) AS SCORE, E.EMP_NO, EMP_NAME, POSITION, EMAIL
FROM HR_EMPLOYEES E
JOIN HR_GRADE G ON E.EMP_NO = G.EMP_NO
GROUP BY E.EMP_NO
ORDER BY SCORE DESC
LIMIT 1;
```


## 7. [재구매가 일어난 상품과 회원 리스트 구하기](https://school.programmers.co.kr/learn/courses/30/lessons/131536)
공부한 날짜: 2025년 1월 29일

### 작성한 SQL 쿼리
```SQL
SELECT USER_ID, PRODUCT_ID
FROM ONLINE_SALE
GROUP BY USER_ID, PRODUCT_ID
HAVING COUNT(*) >= 2
ORDER BY
    USER_ID ASC,
    PRODUCT_ID DESC;
```